---
import Layout from "../../../components/Layout.astro";
import { marked } from "marked";
import insane from "insane";

export const prerender = false;

let content = ""

if (!Astro.params.slug) {
    content = "Invalid URL found"
}else{
    const URL = `https://api.github.com/gists/${Astro.params.slug}`;
    const res = await (await fetch(URL)).json();
    const md = res["files"]["content.md"]
    content = insane(
        await marked.parse(md || "Not found"),
    );
}
---

<!-- Render on a most convenient way the blog entry using markdown coming from github gists -->
<Layout>
    <article set:html={content} />
</Layout>
